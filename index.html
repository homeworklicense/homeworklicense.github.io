<!--
 @preserve LICENSE MIT 2020 Jakub Koralewski
-->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Homework License</title>
<style>/** Copyright 2020 Jakub Koralewski */
#year, #licenser {
  background: -webkit-gradient(linear, left top, left bottom, from(#e66465), to(#9198e5));
  background: linear-gradient(#e66465, #9198e5); }


/*# sourceMappingURL=style.css.map*/</style></head>

<body>
<header>
    <h1>The Homework License</h1>

    <div id="links">
        <div id="share" onclick="share(this)">Share your license</div>
        <div id="gh">GitHub</div>
    </div>
</header>
<main>
    <p id="subtitle">
        Copyright
        <input id="year" value="2020" type="number">
        <input id="licenser" spellcheck="false" value="Jakub Koralewski">
    </p>

    <p>
        Permission is hereby granted, free of charge, to any person obtaining a copy of this homework and associated
        files (the "Homework"), to deal in the Homework without restriction, including without limitation the rights
        to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Homework, and to
        permit persons to whom the Homework is furnished to do so, subject to the following conditions:
    </p>
    <p>
        The above copyright notice and this permission notice shall be included in all copies or substantial
        portions of the Homework.
    </p>
    <p>
        THE HOMEWORK IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT
        LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO
        EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN
        AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE HOMEWORK OR THE USE
        OR OTHER DEALINGS IN THE HOMEWORK.
    </p>
</main>
<footer>
    The Homework License is provided "as is", without warranty... etc.
    Please consult your lawyer before using this license.
</footer>
<script type="text/javascript">/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/scripts/main.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/scripts/main.ts":
/*!*****************************!*\
  !*** ./src/scripts/main.ts ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/** @license
 * Copyright (c) 2020 Jakub Koralewski MIT
 */
Object.defineProperty(exports, "__esModule", { value: true });
__webpack_require__(/*! ../styles/style.scss */ "./src/styles/style.scss");
var queryString = window.location.search;
var urlParams = new URLSearchParams(queryString);
var p = urlParams.get("p");
var STATE = {
    year: { i: 1, data: "2020" },
    licenser: { i: 0, data: "Jakub Koralewski" },
    option: { i: 2, data: 0 },
    i: 0,
    on: true,
};
var shareButton = document.querySelector("#share");
// eslint-disable-next-line @typescript-eslint/explicit-function-return-type
var encodeURL = function () {
    return encodeURI(window.location.origin + "/" + STATE.licenser.data + "/" + STATE.year.data + "/" + STATE.option.data);
};
/* elem.data -> URL */
function setURL() {
    console.log("set url in", this);
    var paths = window.location.pathname.split("/");
    if (this.element) {
        this.data = this.element.value;
    }
    paths[STATE.i + this.i] = this.data;
    window.history.replaceState(null, "", window.location.origin + paths.join("/"));
    if (shareButton.isShareText) {
        shareButton.textContent = encodeURL();
    }
}
/* URL -> elem.data */
function getURL() {
    console.log("get url in", this);
    this.element.value = this.data;
}
STATE.year.setURL = setURL.bind(STATE.year);
STATE.licenser.setURL = setURL.bind(STATE.licenser);
STATE.option.setURL = setURL.bind(STATE.option);
STATE.year.getURL = getURL.bind(STATE.year);
STATE.licenser.getURL = getURL.bind(STATE.licenser);
if (p != null) {
    window.location.href = window.location.origin + p;
    STATE.on = false;
}
else {
    var path = window.location.pathname;
    console.log("path: ", path);
    var paths = path.split("/");
    if (paths[0].trim() === "")
        STATE.i = 1;
    if (paths.length - STATE.i !== 3) {
        console.warn("incorrect number of arguments in ", paths);
        STATE.on = false;
    }
    else {
        STATE.licenser.data = decodeURI(paths[STATE.i + STATE.licenser.i].trim());
        STATE.year.data = paths[STATE.i + STATE.year.i];
        STATE.option.data = parseInt(paths[STATE.i + STATE.option.i]);
        console.log("STATE", STATE);
    }
}
var subtitle = document.querySelector("#subtitle");
STATE.year.element = subtitle.querySelector("#year");
STATE.licenser.element = subtitle.querySelector("#licenser");
if (STATE.on) {
    // Has properties in URL
    for (var _i = 0, _a = [STATE.year, STATE.licenser]; _i < _a.length; _i++) {
        var elem = _a[_i];
        elem.getURL();
        elem.element.addEventListener("input", elem.setURL);
    }
}
else {
    // Empty properties in URL.
    // Requires being bound to itself for some reason for `this` to work.
    var offFunc = function offFunc(elem) {
        var _this = this;
        // Create function that will set URL of each elem
        // despite even only one being written to.
        // eslint-disable-next-line @typescript-eslint/explicit-function-return-type
        return function () {
            [STATE.year, STATE.licenser, STATE.option].forEach(function (x) { return x.setURL(); });
            if (!STATE.on) {
                // Remove this function, and add.
                console.log("elem", elem);
                console.log("this", _this);
                elem.element.removeEventListener("input", _this);
                elem.element.addEventListener("input", elem.setURL);
            }
        };
    };
    for (var _b = 0, _c = [STATE.year, STATE.licenser]; _b < _c.length; _b++) {
        var elem = _c[_b];
        elem.data = elem.element.value;
        elem.element.addEventListener("input", offFunc.bind(offFunc)(elem));
    }
}
// eslint-disable-next-line @typescript-eslint/no-explicit-any
window.share = function share(shareButton) {
    console.log("Share", shareButton);
    if (shareButton.isShareText === true) {
        shareButton.textContent = shareButton.dataset.text;
        shareButton.isShareText = false;
    }
    else {
        shareButton.dataset.text = shareButton.textContent;
        shareButton.textContent = encodeURL();
        shareButton.isShareText = true;
    }
};


/***/ }),

/***/ "./src/styles/style.scss":
/*!*******************************!*\
  !*** ./src/styles/style.scss ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ })

/******/ });
//# sourceMappingURL=script.js.map</script></body>
</html>